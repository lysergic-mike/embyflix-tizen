import{d as e,f as a,y as t,z as o,c as l,b as s,u as i,l as n,o as r,g as u,x as c,m,a as d,B as v,C as p,D as y}from"./vue-vendor.DiveO8bT.js";import{L as g,H as I,M as b,_ as h,a as f,b as w,c as k}from"./components.DleJiWlu.js";import{c as P,a as L,d as C,u as D}from"./composables.DxQ-k9Pa.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const _={id:"app"},T=e({__name:"App",setup(e){const u=n(),c=i();P();const m=a("home"),d=e=>{"Backspace"!==e.key&&"Escape"!==e.key||(e.preventDefault(),"Login"!==c.name&&"Home"!==c.name&&u.back())};return t(()=>{(()=>{switch(c.name){case"Home":default:m.value="home";break;case"Details":m.value="details";break;case"Player":m.value="player"}})(),window.addEventListener("keydown",d)}),o(()=>{window.removeEventListener("keydown",d)}),(e,a)=>(r(),l("div",_,[s(g)]))}}),M={id:"content-container"},S={key:0,id:"content-container"},E={key:1,id:"content-container"},N={key:0,id:"player-screen"},B={key:1,id:"player-screen"},H=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:k},{path:"/home",name:"Home",component:h(e({__name:"HomePage",setup(e){const i=n(),d=D(),v=L(),p=C(),y=a([]),g=a([]),h=a(null),f=a("libraries"),w=async()=>{if(f.value="libraries",h.value=null,d.isDemoMode.value){y.value=p.getLibraries();const e=p.getLibraryItems("demo-movies");g.value=e.slice(0,6)}else try{y.value=await v.getViews()}catch(e){}},k=async e=>{if(h.value=e,f.value="items",d.isDemoMode.value)y.value=p.getLibraryItems(e.Id);else try{let a=null;"movies"===e.CollectionType?a="Movie":"tvshows"===e.CollectionType?a="Series":"collections"===e.CollectionType&&(a="BoxSet"),y.value=await v.getItems(e.Id,a)}catch(a){}},P=e=>{e.CollectionType||"CollectionFolder"===e.Type?k(e):"BoxSet"===e.Type?_(e):i.push({name:"Details",params:{itemId:e.Id}})},_=async e=>{if(h.value=e,f.value="items",d.isDemoMode.value)y.value=p.getCollectionItems(e.Id);else try{y.value=await v.getCollectionItems(e.Id)}catch(a){}},T=e=>{if(d.isDemoMode.value){const a=p.getItemDetails(e);return a?.ImageUrl||""}return v.getImageUrl(e)},S=u(()=>"libraries"===f.value?"Libraries":h.value?h.value.Name:""),E=e=>{i.push({name:"Player",params:{itemId:e.Id}})},N=e=>{},B=e=>{switch(e.detail){case"home":w();break;case"movies":k({Id:"demo-movies",Name:"Movies",Type:"CollectionFolder",CollectionType:"movies"});break;case"tvshows":k({Id:"demo-tvshows",Name:"TV Shows",Type:"CollectionFolder",CollectionType:"tvshows"});break;case"collections":k({Id:"demo-collections",Name:"Collections",Type:"CollectionFolder",CollectionType:"collections"})}};return t(()=>{w(),window.addEventListener("sidebar-navigate",B)}),o(()=>{window.removeEventListener("sidebar-navigate",B)}),(e,a)=>(r(),l("div",M,["libraries"===f.value&&g.value.length>0?(r(),c(I,{key:0,items:g.value,"get-image-url":T,onPlay:E,onFavorite:N},null,8,["items"])):m("",!0),s(b,{items:y.value,title:S.value,"get-image-url":T,onItemClick:P},null,8,["items","title"])]))}}),[["__scopeId","data-v-5b095601"]]),meta:{requiresAuth:!0,layout:"base"}},{path:"/details/:itemId",name:"Details",component:h(e({__name:"DetailsPage",setup(e){const c=n(),m=i(),v=D(),p=C(),y=L(),g=a(null),I=u(()=>g.value?(e=>{if(v.isDemoMode.value){const a=p.getItemDetails(e);return a?.ImageUrl||""}return y.getImageUrl(e)})(g.value.Id):""),b=()=>{g.value&&c.push({name:"Player",params:{itemId:g.value.Id}})},h=()=>{c.back()},w=e=>{},k=e=>{switch(e.detail){case"home":case"movies":case"tvshows":case"collections":c.push({name:"Home"})}};return t(()=>{(()=>{const e=m.params.itemId;v.isDemoMode.value&&(g.value=p.getItemDetails(e)||null)})(),window.addEventListener("sidebar-navigate",k)}),o(()=>{window.removeEventListener("sidebar-navigate",k)}),(e,a)=>g.value?(r(),l("div",S,[s(f,{item:g.value,"image-url":I.value,onPlay:b,onBack:h,onBrowse:w},null,8,["item","image-url"])])):(r(),l("div",E,[...a[0]||(a[0]=[d("p",null,"Loading...",-1)])]))}}),[["__scopeId","data-v-db5298f4"]]),meta:{requiresAuth:!0,layout:"base"}},{path:"/player/:itemId",name:"Player",component:h(e({__name:"PlayerPage",setup(e){const o=n(),c=i(),m=D(),v=C(),p=L(),y=a(null),g=u(()=>{return y.value?(e=y.value.Id,p.getStreamUrl(e)):"";var e}),I=()=>{o.back()},b=()=>{y.value&&p.reportPlaybackStart(y.value.Id)};return t(()=>{(()=>{const e=c.params.itemId;m.isDemoMode.value&&(y.value=v.getItemDetails(e)||null)})()}),(e,a)=>y.value?(r(),l("div",N,[s(w,{item:y.value,"stream-url":g.value,onClose:I,onProgress:a[0]||(a[0]=(e,a)=>((e,a)=>{y.value&&p.reportPlaybackProgress(y.value.Id,e,a)})(e,a)),onPlaybackStart:b,onPlaybackStop:a[1]||(a[1]=e=>(e=>{y.value&&p.reportPlaybackStopped(y.value.Id,e)})(e))},null,8,["item","stream-url"])])):(r(),l("div",B,[...a[2]||(a[2]=[d("p",null,"Loading player...",-1)])]))}}),[["__scopeId","data-v-0dd8541d"]]),meta:{requiresAuth:!0,layout:"none"}}],A=v({history:p(),routes:H}),F=y(T);F.use(A),F.mount("#app");

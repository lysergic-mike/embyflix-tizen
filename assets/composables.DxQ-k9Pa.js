import{f as e,y as t,z as o}from"./vue-vendor.DiveO8bT.js";const n=e(!1),r=e(null),i=e(!1);function a(){return{isAuthenticated:n,currentUser:r,isDemoMode:i,login:e=>{n.value=!0,r.value=e,i.value=!1},logout:()=>{n.value=!1,r.value=null,i.value=!1},enableDemoMode:()=>{i.value=!0,n.value=!0,r.value={Name:"Demo User",Id:"demo-user-id"}}}}function s(){const n=e(!1);let r=[],i=0;const a=()=>(()=>{const e=Date.now();if(e-i>100){const t='button:not([disabled]):not([tabindex="-1"]), a[href], input:not([disabled]), [tabindex]:not([tabindex="-1"]), .media-card, .nav-item';r=Array.from(document.querySelectorAll(t)),i=e}return r})(),s=()=>document.querySelector(".hero-slider-wrapper"),l=e=>{e.focus(),e.scrollIntoView({behavior:"smooth",block:"center"})},c=e=>{n.value=!1;const t=s(),o=a();if(!t||0===o.length)return;if("left"===e){const e=document.querySelector(".sidebar .nav-item");if(e)return void l(e)}const r=t.getBoundingClientRect().bottom;let i=null,c=1/0;for(const n of o){const e=n.getBoundingClientRect();if(e.top>=r-10){const t=e.top-r;t<c&&(c=t,i=n)}}i?l(i):o.length>0&&l(o[0])},d=e=>{if(n.value){if("up"!==e&&"down"!==e||c(),"left"===e){const e=s();if(e&&e===document.activeElement)return}return}const t=a(),o=document.activeElement;if("left"===e&&o&&o.closest(".media-card")){const e=document.querySelector(".media-card");if(e&&o.closest(".media-card")===e){const e=document.querySelector(".sidebar .nav-item");if(e)return void l(e)}}if("right"===e){const e=s();if(e&&(!o||o.closest(".sidebar")))return n.value=!0,void l(e)}if(!t.includes(o))return void(t.length>0&&l(t[0]));const r=((e,t,o)=>{const n=e.getBoundingClientRect(),r=n.left+n.width/2,i=n.top+n.height/2;let a=null,s=1/0;for(const l of t){if(l===e)continue;const t=l.getBoundingClientRect(),n={x:t.left+t.width/2,y:t.top+t.height/2},c=n.x-r,d=n.y-i;let u=!1;switch(o){case"up":u=d<-10;break;case"down":u=d>10;break;case"left":u=c<-10;break;case"right":u=c>10}if(!u)continue;const m=Math.sqrt(c*c+d*d);let g=0;g="up"===o||"down"===o?.5*Math.abs(c):.5*Math.abs(d);const v=m+g;v<s&&(s=v,a=l)}return a})(o,t,e);r&&l(r)},u=e=>{switch(e.key){case"ArrowUp":e.preventDefault(),d("up");break;case"ArrowDown":e.preventDefault(),d("down");break;case"ArrowLeft":e.preventDefault(),d("left");break;case"ArrowRight":e.preventDefault(),d("right")}},m=e=>{const t=e.detail;"left"===t?c("left"):"down"===t&&c("down")};let g=null,v=null;return t(()=>{window.addEventListener("keydown",u),window.addEventListener("exitHeroSlider",m),g=setTimeout(()=>{const e=document.querySelector(".sidebar .nav-item");e?l(e):v=setTimeout(()=>{const e=document.querySelector(".sidebar .nav-item");e&&l(e)},200)},300)}),o(()=>{window.removeEventListener("keydown",u),window.removeEventListener("exitHeroSlider",m),null!==g&&clearTimeout(g),null!==v&&clearTimeout(v)}),{handleNavigation:d,isSliderMode:n}}function l(){const t=e(""),o=e(""),n=e(""),r=e(!1),i=e(null),a=()=>{const e={"Content-Type":"application/json","X-Emby-Authorization":'MediaBrowser Client="EmbyFlix", Device="Samsung TV", DeviceId="embyflix-tizen", Version="1.0.0"'};return n.value&&(e["X-Emby-Token"]=n.value),e};return{serverUrl:t,userId:o,accessToken:n,isLoading:r,error:i,authenticateByName:async(e,s,l="")=>{r.value=!0,i.value=null;try{t.value=e;const r=`${e}/emby/Users/AuthenticateByName`,i={Username:s,Pw:l},c=await fetch(r,{method:"POST",headers:a(),body:JSON.stringify(i),mode:"cors",credentials:"omit"});if(!c.ok)throw new Error(`Authentication failed: ${c.status}`);const d=await c.json();return n.value=d.AccessToken,o.value=d.User.Id,d}catch(c){throw i.value=c instanceof Error?c.message:"Unknown error",c}finally{r.value=!1}},getViews:async()=>{r.value=!0,i.value=null;try{const e=`${t.value}/emby/Users/${o.value}/Views`,n=await fetch(e,{headers:a(),mode:"cors",credentials:"omit"});if(!n.ok)throw new Error(`Failed to get views: ${n.status}`);return(await n.json()).Items||[]}catch(e){throw i.value=e instanceof Error?e.message:"Unknown error",e}finally{r.value=!1}},getItems:async(e,n=null)=>{r.value=!0,i.value=null;try{let r=`${t.value}/emby/Users/${o.value}/Items?ParentId=${e}&Limit=100`;n&&(r+=`&IncludeItemTypes=${n}`);const i=await fetch(r,{headers:a(),mode:"cors",credentials:"omit"});if(!i.ok)throw new Error(`Failed to get items: ${i.status}`);return(await i.json()).Items||[]}catch(s){throw i.value=s instanceof Error?s.message:"Unknown error",s}finally{r.value=!1}},getCollectionItems:async e=>{r.value=!0,i.value=null;try{const n=`${t.value}/emby/Users/${o.value}/Items?ParentId=${e}&Limit=100`,r=await fetch(n,{headers:a(),mode:"cors",credentials:"omit"});if(!r.ok)throw new Error(`Failed to get collection items: ${r.status}`);return(await r.json()).Items||[]}catch(n){throw i.value=n instanceof Error?n.message:"Unknown error",n}finally{r.value=!1}},getStreamUrl:e=>`${t.value}/emby/Videos/${e}/stream?static=true&api_key=${n.value}`,reportPlaybackStart:async e=>{try{const o=`${t.value}/emby/Sessions/Playing`,n={ItemId:e,CanSeek:!0,IsMuted:!1,IsPaused:!1,PositionTicks:0};await fetch(o,{method:"POST",headers:a(),body:JSON.stringify(n),mode:"cors",credentials:"omit"})}catch(o){}},reportPlaybackProgress:async(e,o,n)=>{try{const r=`${t.value}/emby/Sessions/Playing/Progress`,i={ItemId:e,PositionTicks:o,IsPaused:n,IsMuted:!1};await fetch(r,{method:"POST",headers:a(),body:JSON.stringify(i),mode:"cors",credentials:"omit"})}catch(r){}},reportPlaybackStopped:async(e,o)=>{try{const n=`${t.value}/emby/Sessions/Playing/Stopped`,r={ItemId:e,PositionTicks:o};await fetch(n,{method:"POST",headers:a(),body:JSON.stringify(r),mode:"cors",credentials:"omit"})}catch(n){}},getImageUrl:(e,o="Primary",r=300)=>`${t.value}/emby/Items/${e}/Images/${o}?maxWidth=${r}&api_key=${n.value}`}}function c(n,r={}){const i=e(!1),{threshold:a=.1,rootMargin:s="0px",onEnter:l,onExit:c}=r;let d=null;return t(()=>{n.value&&(d=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?(i.value=!0,l?.()):(i.value=!1,c?.())})},{threshold:a,rootMargin:s}),d.observe(n.value))}),o(()=>{d&&d.disconnect()}),{isVisible:i}}function d(){const t=e([{Id:"demo-movies",Name:"Movies",Type:"CollectionFolder",CollectionType:"movies"},{Id:"demo-tvshows",Name:"TV Shows",Type:"CollectionFolder",CollectionType:"tvshows"},{Id:"demo-collections",Name:"Collections",Type:"CollectionFolder",CollectionType:"collections"}]),o=e([{Id:"demo-1",Name:"The Cosmic Journey",Type:"Movie",ProductionYear:2023,Overview:"An epic space adventure that follows a crew of explorers as they venture beyond the known galaxy to discover new worlds and face unexpected challenges. Their journey tests the limits of human courage and ingenuity as they encounter alien civilizations and cosmic phenomena that defy understanding.",CommunityRating:8.4,OfficialRating:"PG-13",RunTimeTicks:72e9,Genres:["Science Fiction","Adventure","Drama"],ImageUrl:"/DemoContent/Posters/joker-poster.png"},{Id:"demo-2",Name:"Mystery at Midnight Manor",Type:"Movie",ProductionYear:2022,Overview:"A classic whodunit mystery set in a sprawling Victorian mansion. When a renowned detective is invited to a weekend party, he finds himself investigating a puzzling murder that occurred at the stroke of midnight. Every guest has secrets, and everyone is a suspect.",CommunityRating:7.9,OfficialRating:"PG",RunTimeTicks:66e9,Genres:["Mystery","Thriller","Drama"],ImageUrl:"/DemoContent/Posters/dr-strange-poster.jpg"},{Id:"demo-3",Name:"Laughing Through Life",Type:"Movie",ProductionYear:2024,Overview:"A heartwarming comedy about a struggling comedian who discovers that the best jokes come from the most unexpected moments in life. Follow her journey from open mic nights to the big stage as she learns that laughter truly is the best medicine.",CommunityRating:8.1,OfficialRating:"R",RunTimeTicks:54e9,Genres:["Comedy","Drama"],ImageUrl:"/DemoContent/Posters/exorcist-poster.jpg"},{Id:"demo-4",Name:"Dragon's Peak",Type:"Movie",ProductionYear:2023,Overview:"In a realm where dragons and humans once coexisted, a young warrior must climb the legendary Dragon's Peak to prevent an ancient evil from returning. This epic fantasy adventure combines stunning visuals with a timeless tale of courage and friendship.",CommunityRating:9.2,OfficialRating:"PG-13",RunTimeTicks:9e10,Genres:["Fantasy","Adventure","Action"],ImageUrl:"/DemoContent/Posters/wayns-world-2-poster.jpg"},{Id:"demo-5",Name:"The Last Algorithm",Type:"Movie",ProductionYear:2024,Overview:"A gripping techno-thriller about a brilliant programmer who discovers a hidden algorithm that could either save humanity or bring about its downfall. As powerful corporations hunt her down, she must decide who to trust in a world where nothing is as it seems.",CommunityRating:8.7,OfficialRating:"R",RunTimeTicks:78e9,Genres:["Thriller","Science Fiction","Action"],ImageUrl:"/DemoContent/Posters/joker-poster.png"},{Id:"demo-6",Name:"Summer of '89",Type:"Movie",ProductionYear:2023,Overview:"A nostalgic coming-of-age story set during one unforgettable summer. Follow a group of friends as they navigate the challenges of growing up, discovering who they are, and learning the true meaning of friendship before everything changes forever.",CommunityRating:8.5,OfficialRating:"PG-13",RunTimeTicks:6e10,Genres:["Drama","Romance","Coming of Age"],ImageUrl:"/DemoContent/Posters/joker-poster.png"}]),n=e([{Id:"demo-tv-1",Name:"Tech Titans",Type:"Series",ProductionYear:2023,Overview:"A dramatic series following the rise and fall of tech entrepreneurs in Silicon Valley.",CommunityRating:8.8,OfficialRating:"TV-MA",Genres:["Drama","Technology"],ImageUrl:"/DemoContent/Posters/dr-strange-poster.jpg"},{Id:"demo-tv-2",Name:"Galactic Patrol",Type:"Series",ProductionYear:2022,Overview:"Space opera following an intergalactic police force protecting the universe.",CommunityRating:9,OfficialRating:"TV-14",Genres:["Science Fiction","Action","Adventure"],ImageUrl:"/DemoContent/Posters/wayns-world-2-poster.jpg"}]),r=e([{Id:"demo-collection-1",Name:"Epic Space Saga",Type:"BoxSet",Overview:"The complete collection of space adventure films.",ImageUrl:"/DemoContent/Posters/joker-poster.png",ChildCount:3},{Id:"demo-collection-2",Name:"Mystery Classics",Type:"BoxSet",Overview:"Timeless mystery and detective stories.",ImageUrl:"/DemoContent/Posters/exorcist-poster.jpg",ChildCount:5}]);return{demoLibraries:t,demoMovies:o,demoTVShows:n,demoCollections:r,getLibraries:()=>t.value,getLibraryItems:e=>"demo-movies"===e?o.value:"demo-tvshows"===e?n.value:"demo-collections"===e?r.value:[],getItemDetails:e=>[...o.value,...n.value,...r.value].find(t=>t.Id===e),getCollectionItems:e=>o.value.slice(0,3)}}export{l as a,c as b,s as c,d,a as u};

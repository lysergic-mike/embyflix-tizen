import{d as e,c as a,a as t,F as s,r as l,w as i,t as n,o as r,n as o,b as u,e as c,f as v,g as d,u as m,h as p,i as g,j as y,k as f,l as k,m as h,p as b,v as w,q as C,s as I,x as _,y as U,z as x,T as L,A as M}from"./vue-vendor.DiveO8bT.js";import{u as E,a as N,b as R}from"./composables.DxQ-k9Pa.js";const P={class:"sidebar"},S={class:"sidebar-nav"},T=["onClick"],D={class:"nav-icon"},$={class:"nav-text"},F={class:"sidebar-footer"},H={class:"user-info"},O={class:"user-name"},A=(e,a)=>{const t=e.__vccOpts||e;for(const[s,l]of a)t[s]=l;return t},Y=A(e({__name:"Sidebar",props:{activeNavItem:{},userName:{}},emits:["navigate","logout"],setup(e,{emit:u}){const c=u,v=[{id:"home",icon:"",text:"Home"},{id:"movies",icon:"",text:"Movies"},{id:"tvshows",icon:"",text:"TV Shows"},{id:"collections",icon:"",text:"Collections"},{id:"search",icon:"",text:"Search"},{id:"settings",icon:"",text:"Settings"}],d=()=>{c("logout")};return(u,m)=>(r(),a("div",P,[t("nav",S,[(r(),a(s,null,l(v,a=>t("a",{key:a.id,href:"#",class:o(["nav-item",{active:e.activeNavItem===a.id}]),onClick:i(e=>c("navigate",a.id),["prevent"])},[t("span",D,n(a.icon),1),t("span",$,n(a.text),1)],10,T)),64)),t("a",{href:"#",class:"nav-item logout-item",onClick:i(d,["prevent"])},[...m[0]||(m[0]=[t("span",{class:"nav-icon"},"🚪",-1),t("span",{class:"nav-text"},"Logout",-1)])])]),t("div",F,[t("div",H,[m[1]||(m[1]=t("span",{class:"user-icon"},"👤",-1)),t("span",O,n(e.userName),1)])])]))}}),[["__scopeId","data-v-2e689d1e"]]),G={class:"layout"},B={class:"content"},V={class:"main-content"},z=A(e({__name:"BaseLayout",props:{activeNavItem:{},userName:{}},emits:["navigate","logout"],setup(e,{emit:s}){const l=s;return(s,i)=>(r(),a("div",G,[i[2]||(i[2]=t("div",{class:"header"},[t("h2",null,"EmbyFlix")],-1)),t("div",B,[u(Y,{"active-nav-item":e.activeNavItem,"user-name":e.userName,onNavigate:i[0]||(i[0]=e=>l("navigate",e)),onLogout:i[1]||(i[1]=e=>l("logout"))},null,8,["active-nav-item","user-name"]),t("div",V,[c(s.$slots,"default",{},void 0)])]),i[3]||(i[3]=t("div",{class:"background-container"},null,-1))]))}}),[["__scopeId","data-v-57d8ca78"]]),j={key:0,class:"layout-wrapper"},K={key:1,class:"no-layout-wrapper"},W=A(e({__name:"LayoutWrapper",setup(e){const t=m(),s=k(),l=E(),i=v("home"),n=d(()=>t.meta.layout||"none"),o=d(()=>"base"===n.value);p(()=>t.name,e=>{switch(e){case"Home":default:i.value="home";break;case"Details":i.value="details"}});const c=e=>{i.value=e;const a=new CustomEvent("sidebar-navigate",{detail:e});window.dispatchEvent(a)},h=()=>{l.logout(),s.push({name:"Login"})};return(e,t)=>{const s=f("RouterView");return o.value?(r(),a("div",j,[u(z,{"active-nav-item":i.value,"user-name":g(l).currentUser.value?.Name||"User",onNavigate:c,onLogout:h},{default:y(()=>[u(s)]),_:1},8,["active-nav-item","user-name"])])):(r(),a("div",K,[u(s)]))}}}),[["__scopeId","data-v-9c5aa730"]]),q={class:"login-container"},J={class:"login-box"},Q={key:0,class:"error-message"},X={class:"form-group"},Z=["disabled"],ee={class:"form-group"},ae=["disabled"],te={class:"form-group"},se=["disabled"],le=["disabled"],ie=["disabled"],ne=e({__name:"LoginForm",props:{isLoading:{type:Boolean},error:{}},setup(e){const s=k(),l=E(),i=N(),o=v("http://localhost:8096"),u=v(""),c=v(""),d=async()=>{if(o.value&&u.value)try{const e=await i.authenticateByName(o.value,u.value,c.value);l.login(e.User),s.push({name:"Home"})}catch(e){}},m=()=>{l.enableDemoMode(),s.push({name:"Home"})};return(s,l)=>(r(),a("div",q,[t("div",J,[l[6]||(l[6]=t("h1",null,"EmbyFlix",-1)),l[7]||(l[7]=t("p",null,"Connect to your Emby Server",-1)),e.error?(r(),a("div",Q,n(e.error),1)):h("",!0),t("div",X,[l[3]||(l[3]=t("label",{for:"server-url"},"Server URL",-1)),b(t("input",{id:"server-url","onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),type:"text",placeholder:"https://your-server:8096",disabled:e.isLoading},null,8,Z),[[w,o.value]])]),t("div",ee,[l[4]||(l[4]=t("label",{for:"username"},"Username",-1)),b(t("input",{id:"username","onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),type:"text",placeholder:"Enter username",disabled:e.isLoading,onKeyup:C(d,["enter"])},null,40,ae),[[w,u.value]])]),t("div",te,[l[5]||(l[5]=t("label",{for:"password"},"Password (optional)",-1)),b(t("input",{id:"password","onUpdate:modelValue":l[2]||(l[2]=e=>c.value=e),type:"password",placeholder:"Enter password",disabled:e.isLoading,onKeyup:C(d,["enter"])},null,40,se),[[w,c.value]])]),t("button",{class:"btn-primary",disabled:e.isLoading||!o.value||!u.value,onClick:d},n(e.isLoading?"Connecting...":"Connect to Server"),9,le),t("button",{class:"btn-secondary",disabled:e.isLoading,onClick:m}," Demo Mode (Test UI) ",8,ie)])]))}}),re={class:"card-image"},oe=["src","alt"],ue={key:1,class:"placeholder-image"},ce={key:2,class:"placeholder-image"},ve={class:"card-info"},de={class:"card-title"},me={key:0,class:"card-year"},pe={key:1,class:"card-rating"},ge={key:2,class:"card-count"},ye=e({__name:"MovieCard",props:{item:{},imageUrl:{}},emits:["click"],setup(e,{emit:s}){const l=s,i=v(),o=v(!1);R(i,{threshold:.01,rootMargin:"50px",onEnter:()=>{o.value=!0}});const u=e=>{if(!e)return"";return`${"⭐".repeat(Math.round(e/2))} ${e.toFixed(1)}`};return(s,c)=>(r(),a("div",{ref_key:"cardRef",ref:i,class:"media-card",tabindex:"0",onClick:c[0]||(c[0]=a=>l("click",e.item)),onKeydown:c[1]||(c[1]=C(a=>l("click",e.item),["enter"]))},[t("div",re,[o.value&&(e.imageUrl||e.item.ImageUrl)?(r(),a("img",{key:0,src:e.imageUrl||e.item.ImageUrl,alt:e.item.Name,loading:"lazy",decoding:"async"},null,8,oe)):o.value?(r(),a("div",ce,n(e.item.Name),1)):(r(),a("div",ue," Loading... "))]),t("div",ve,[t("h3",de,n(e.item.Name),1),e.item.ProductionYear?(r(),a("div",me,n(e.item.ProductionYear),1)):h("",!0),e.item.CommunityRating?(r(),a("div",pe,n(u(e.item.CommunityRating)),1)):h("",!0),e.item.ChildCount?(r(),a("div",ge,n(e.item.ChildCount)+" items ",1)):h("",!0)])],544))}}),fe={class:"movie-grid-container"},ke={key:0,class:"grid-title"},he=A(e({__name:"MovieGrid",props:{items:{},title:{},getImageUrl:{type:Function}},emits:["itemClick"],setup(e,{emit:i}){const o=e,u=i,c=v(),m=v(0),p=v(0),g=d(()=>{if(!c.value)return 4;const e=c.value.clientWidth;return Math.max(1,Math.floor(e/196))}),y=336,f=d(()=>Math.ceil(p.value/y)+2),k=d(()=>Math.max(0,Math.floor(m.value/y)-1)),b=d(()=>{const e=k.value+f.value;return Math.min(Math.ceil(o.items.length/g.value),e)}),w=d(()=>{const e=k.value*g.value,a=b.value*g.value;return o.items.slice(e,a)}),C=d(()=>k.value*y),U=d(()=>Math.ceil(o.items.length/g.value)*y),x=e=>{const a=e.target;m.value=a.scrollTop,p.value=a.clientHeight};return(i,o)=>(r(),a("div",fe,[e.title?(r(),a("h2",ke,n(e.title),1)):h("",!0),t("div",{ref_key:"gridContainer",ref:c,class:"grid-wrapper",onScroll:x},[t("div",{class:"grid",style:I({height:U.value+"px",position:"relative"})},[t("div",{style:I({transform:`translateY(${C.value}px)`})},[(r(!0),a(s,null,l(w.value,a=>(r(),_(ye,{key:a.Id,item:a,"image-url":e.getImageUrl?e.getImageUrl(a.Id):a.ImageUrl,onClick:e=>u("itemClick",a)},null,8,["item","image-url","onClick"]))),128))],4)],4)],544)]))}}),[["__scopeId","data-v-6165f50a"]]),be={class:"hero-slider"},we={class:"slide-background"},Ce=["src","alt"],Ie={class:"slide-content"},_e={class:"slide-title"},Ue={class:"slide-meta"},xe={key:0,class:"meta-item"},Le={key:1,class:"meta-item rating"},Me={key:2,class:"meta-item"},Ee={key:3,class:"meta-item"},Ne={key:0,class:"slide-genres"},Re={key:1,class:"slide-description"},Pe={class:"slide-actions"},Se={class:"slider-indicators"},Te=["onClick","aria-label"],De=A(e({__name:"HeroSlider",props:{items:{},getImageUrl:{type:Function}},emits:["play","favorite"],setup(e,{emit:i}){const c=e,d=i,m=v(),g=v(0),f=v("slider"),k=()=>{g.value=(g.value+1)%c.items.length},b=e=>{if(m.value===document.activeElement)switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),"play"===f.value?_(c.items[g.value]):"favorite"===f.value&&M(c.items[g.value]);break;case"ArrowLeft":if(e.preventDefault(),e.stopPropagation(),"slider"===f.value)if(0===g.value){const e=new CustomEvent("exitHeroSlider",{detail:"left"});window.dispatchEvent(e)}else g.value=(g.value-1+c.items.length)%c.items.length;else"play"===f.value?f.value="slider":"favorite"===f.value&&(f.value="play");break;case"ArrowRight":e.preventDefault(),e.stopPropagation(),"slider"===f.value?k():"play"===f.value?f.value="favorite":"favorite"===f.value&&(k(),f.value="slider");break;case"ArrowDown":if(e.preventDefault(),e.stopPropagation(),"slider"===f.value)f.value="play";else if("play"===f.value||"favorite"===f.value){const e=new CustomEvent("exitHeroSlider",{detail:"down"});window.dispatchEvent(e)}break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),("play"===f.value||"favorite"===f.value)&&(f.value="slider")}},w=e=>{const a=e.relatedTarget;(!a||!m.value?.contains(a))&&(f.value="slider")},C=()=>{},I=e=>{const a=e.relatedTarget;(!a||!m.value?.contains(a))&&(f.value="slider")};U(()=>{f.value="slider",m.value&&(m.value.addEventListener("keydown",b),m.value.addEventListener("focus",I,!0),m.value.addEventListener("focusin",w),m.value.addEventListener("focusout",C))}),x(()=>{m.value&&(m.value.removeEventListener("keydown",b),m.value.removeEventListener("focus",I,!0),m.value.removeEventListener("focusin",w),m.value.removeEventListener("focusout",C))});const _=e=>{d("play",e)},M=e=>{d("favorite",e)},E=e=>{if(!e)return"";const a=Math.floor(e/6e8),t=Math.floor(a/60),s=a%60;return t>0?`${t}h ${s}m`:`${s}m`},N=e=>{(new Image).src=e};return p(()=>g.value,()=>{(()=>{const e=(g.value+1)%c.items.length,a=(g.value-1+c.items.length)%c.items.length,t=c.getImageUrl?c.getImageUrl(c.items[e].Id):c.items[e].ImageUrl;t&&N(t);const s=c.getImageUrl?c.getImageUrl(c.items[a].Id):c.items[a].ImageUrl;s&&N(s)})()}),(e,i)=>(r(),a("div",{ref_key:"sliderWrapper",ref:m,class:"hero-slider-wrapper",tabindex:"0"},[t("div",be,[u(L,{name:"slide-fade"},{default:y(()=>[c.items[g.value]?(r(),a("div",{key:c.items[g.value].Id,class:"hero-slide"},[t("div",we,[t("img",{src:c.getImageUrl?c.getImageUrl(c.items[g.value].Id):c.items[g.value].ImageUrl,alt:c.items[g.value].Name,loading:"lazy",decoding:"async"},null,8,Ce)]),t("div",Ie,[t("h1",_e,n(c.items[g.value].Name),1),t("div",Ue,[c.items[g.value]?.ProductionYear?(r(),a("span",xe,n(c.items[g.value]?.ProductionYear),1)):h("",!0),c.items[g.value]?.CommunityRating?(r(),a("span",Le," ⭐ "+n(c.items[g.value]?.CommunityRating?.toFixed(1)),1)):h("",!0),c.items[g.value]?.OfficialRating?(r(),a("span",Me,n(c.items[g.value]?.OfficialRating),1)):h("",!0),c.items[g.value]?.RunTimeTicks?(r(),a("span",Ee,n(E(c.items[g.value]?.RunTimeTicks)),1)):h("",!0)]),c.items[g.value]?.Genres?(r(),a("div",Ne,[(r(!0),a(s,null,l(c.items[g.value]?.Genres?.slice(0,3),e=>(r(),a("span",{key:e,class:"genre-tag"},n(e),1))),128))])):h("",!0),c.items[g.value]?.Overview?(r(),a("p",Re,n(c.items[g.value]?.Overview?.substring(0,150))+"... ",1)):h("",!0),t("div",Pe,[t("button",{tabindex:"-1",class:o(["btn-play",{focused:"play"===f.value}]),onClick:i[0]||(i[0]=e=>_(c.items[g.value]))}," ▶ Play ",2),t("button",{tabindex:"-1",class:o(["btn-favorite",{focused:"favorite"===f.value}]),onClick:i[1]||(i[1]=e=>M(c.items[g.value]))}," ♥ Add to Favorites ",2)])])])):h("",!0)]),_:1})]),t("div",Se,[(r(!0),a(s,null,l(c.items,(e,t)=>(r(),a("button",{key:e.Id,tabindex:"-1",class:o(["indicator",{active:g.value===t}]),onClick:e=>(e=>{e>=0&&e<c.items.length&&(g.value=e,f.value="slider")})(t),"aria-label":`Go to slide ${t+1}`},null,10,Te))),128))])],512))}}),[["__scopeId","data-v-6a4c6749"]]),$e={class:"details-container"},Fe={class:"details-content"},He={class:"details-poster"},Oe=["src","alt"],Ae={key:1,class:"placeholder-poster"},Ye={class:"details-info"},Ge={class:"details-title"},Be={class:"details-meta"},Ve={key:0,class:"meta-year"},ze={key:1,class:"meta-rating"},je={key:2,class:"meta-runtime"},Ke={key:3,class:"meta-count"},We={key:0,class:"details-rating"},qe={key:1,class:"details-genres"},Je={key:2,class:"details-overview"},Qe={class:"details-actions"},Xe=e({__name:"MovieDetails",props:{item:{},imageUrl:{}},emits:["play","back","browse"],setup(e,{emit:i}){const o=e,u=i,c=e=>{if(!e)return"";const a=Math.floor(e/6e8),t=Math.floor(a/60),s=a%60;return t>0?`${t}h ${s}m`:`${s}m`},v=e=>{if(!e)return"";return`${"⭐".repeat(Math.round(e/2))} ${e.toFixed(1)}`},m=d(()=>"BoxSet"===o.item.Type);return(i,o)=>(r(),a("div",$e,[t("button",{class:"back-button",onClick:o[0]||(o[0]=e=>u("back"))}," ← Back "),t("div",Fe,[t("div",He,[e.imageUrl||e.item.ImageUrl?(r(),a("img",{key:0,src:e.imageUrl||e.item.ImageUrl,alt:e.item.Name},null,8,Oe)):(r(),a("div",Ae,n(e.item.Name),1))]),t("div",Ye,[t("h1",Ge,n(e.item.Name),1),t("div",Be,[e.item.ProductionYear?(r(),a("span",Ve,n(e.item.ProductionYear),1)):h("",!0),e.item.OfficialRating?(r(),a("span",ze,n(e.item.OfficialRating),1)):h("",!0),e.item.RunTimeTicks?(r(),a("span",je,n(c(e.item.RunTimeTicks)),1)):h("",!0),e.item.ChildCount?(r(),a("span",Ke,n(e.item.ChildCount)+" items ",1)):h("",!0)]),e.item.CommunityRating?(r(),a("div",We,n(v(e.item.CommunityRating)),1)):h("",!0),e.item.Genres&&e.item.Genres.length?(r(),a("div",qe,[(r(!0),a(s,null,l(e.item.Genres,e=>(r(),a("span",{key:e,class:"genre-tag"},n(e),1))),128))])):h("",!0),e.item.Overview?(r(),a("p",Je,n(e.item.Overview),1)):h("",!0),t("div",Qe,[m.value?(r(),a("button",{key:1,class:"btn-primary",onClick:o[2]||(o[2]=a=>u("browse",e.item))}," Browse Collection ")):(r(),a("button",{key:0,class:"btn-primary btn-play",tabindex:"0",onClick:o[1]||(o[1]=a=>u("play",e.item))},[...o[3]||(o[3]=[M(" Play ",-1),t("span",{style:{"font-size":"20px",position:"relative",top:"1px"}},"▶",-1)])]))])])])]))}}),Ze={class:"player-container"},ea={class:"player-controls"},aa={class:"player-info"},ta={class:"player-buttons"},sa=1e7,la=e({__name:"VideoPlayer",props:{item:{},streamUrl:{}},emits:["close","progress","playbackStart","playbackStop"],setup(e,{emit:s}){const l=e,i=s,o=v(null),u=v(!1),c=v(null),d=()=>{o.value&&(o.value.paused?(o.value.play(),u.value=!0):(o.value.pause(),u.value=!1))},m=()=>{if(!o.value)return;const e=Math.floor(o.value.currentTime*sa);i("playbackStop",e),i("close")},p=e=>{o.value&&(o.value.currentTime+=e)},g=()=>{if(!o.value)return;const e=Math.floor(o.value.currentTime*sa),a=o.value.paused;i("progress",e,a)};return U(()=>{o.value&&(o.value.src=l.streamUrl,o.value.play(),u.value=!0,i("playbackStart"),c.value=window.setInterval(g,1e4));const e=e=>{switch(e.key){case" ":case"MediaPlayPause":e.preventDefault(),d();break;case"MediaStop":case"Escape":e.preventDefault(),m();break;case"ArrowLeft":e.preventDefault(),p(-10);break;case"ArrowRight":e.preventDefault(),p(10);break;case"MediaRewind":e.preventDefault(),p(-30);break;case"MediaFastForward":e.preventDefault(),p(30)}};window.addEventListener("keydown",e),x(()=>{window.removeEventListener("keydown",e),c.value&&clearInterval(c.value)})}),(s,l)=>(r(),a("div",Ze,[t("video",{ref_key:"videoElement",ref:o,class:"video-player",controls:"",autoplay:""}," Your browser does not support the video tag. ",512),t("div",ea,[t("div",aa,[t("h2",null,n(e.item.Name),1)]),t("div",ta,[t("button",{onClick:l[0]||(l[0]=e=>p(-10))},"⏪ -10s"),t("button",{onClick:d},n(u.value?"⏸ Pause":"▶ Play"),1),t("button",{onClick:l[1]||(l[1]=e=>p(10))},"⏩ +10s"),t("button",{onClick:m},"⏹ Stop")])])]))}});export{De as H,W as L,he as M,A as _,Xe as a,la as b,ne as c};
